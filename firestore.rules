rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {

    // üìÅ –ö–∞—Ç–µ–≥–æ—Ä—ñ—ó
    match /categories/{categoryId} {
      allow read: if true;
      allow write: if request.auth != null && request.auth.token.email == "admin@bla.com";
    }

    // üçΩÔ∏è –°—Ç—Ä–∞–≤–∏ (–º–µ–Ω—é)
    match /menu/{menuId} {
      allow read: if true;
      allow write: if request.auth != null && request.auth.token.email == "admin@bla.com";
    }

    // üßæ –ó–∞–º–æ–≤–ª–µ–Ω–Ω—è
    match /orders/{orderId} {
      allow create: if true; // –ö–ª—ñ—î–Ω—Ç –Ω–∞–¥—Å–∏–ª–∞—î –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è –±–µ–∑ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—ó
      allow read, update, delete: if request.auth != null &&
        request.auth.token.email in ["admin@bla.com", "kitchen@bla.com"];
    }

    // ‚öôÔ∏è –î–∞–Ω—ñ –∞–¥–º—ñ–Ω-–ø–∞–Ω–µ–ª—ñ
    match /adminPanel/{document=**} {
      allow read, write: if request.auth != null &&
        request.auth.token.email == "admin@bla.com";
    }

    // üßë‚Äçüç≥ –î–æ–¥–∞—Ç–∫–æ–≤–æ: —è–∫—â–æ —î –æ–∫—Ä–µ–º–∞ –∫–æ–ª–µ–∫—Ü—ñ—è `dishes`
    match /dishes/{dishId} {
      allow read: if true;
      allow write: if request.auth != null && request.auth.token.email == "admin@bla.com";
    }

    // ‚ùå –ó–∞–±–æ—Ä–æ–Ω–∞ –≤—Å—å–æ–≥–æ —ñ–Ω—à–æ–≥–æ
    match /{document=**} {
      allow read, write: if false;
    }
  }
}
